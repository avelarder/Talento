@*@model Talento.Models.PositionModel*@
@model Tuple<List<Talento.Models.PositionCandidatesViewModel>, Talento.Models.PositionModel>
@{
    ViewBag.Title = "Position details";
    Layout = "~/Views/Shared/_LayoutDashboard.cshtml";
}

<div class="row">
    <div class="col-md-8">
        <br />
        <div>
            <div class="col-md-7">
                <b>Title:</b> @Html.DisplayFor(x => x.Item2.Title)
            </div>
            <div class="col-md-5">
                <b>Creation date:</b> @Html.DisplayFor(x => x.Item2.CreationDate)
            </div>
        </div>
        <div class="bottom">&nbsp;</div>
        <br />
        <div class="col-md-11">
            <p><b>Description: </b>@Html.DisplayFor(x => x.Item2.Description)</p>
            <p><b>Area: </b>@Html.DisplayFor(x => x.Item2.Area)<p />
            <p><b>Owner: </b>@Html.DisplayFor(x => x.Item2.Owner.UserName)<p />
            <p><b>Engagement Manager: </b>@Html.DisplayFor(x => x.Item2.EngagementManager)<p />
            <p><b>Portfolio Manager: </b>@Html.DisplayFor(x => x.Item2.PortfolioManager.UserName)<p />
            <p><b>RGS: </b>@Html.DisplayFor(x => x.Item2.RGS)<p />
            <p><b>Status: </b>@Html.DisplayFor(x => x.Item2.Status)<p />
        </div>
        <div class="col-md-8">
            <input type="button" name="back" class="btn pmd-ripple-effect btn-primary" value="Back" onclick="@("window.location.href='" + @Url.Action("Index", "Dashboard") + "'");" />
            <input type="button" name="edit" class="btn pmd-ripple-effect btn-primary" value="Edit" onclick="@("window.location.href='" + @Url.Action("Edit", "Positions", new { id = Model.Item2.Id }) + "'");" />
            <input data-target="#complete-dialog" data-toggle="modal" class="btn btn-danger pmd-ripple-effect btn-primary pmd-z-depth" value="Delete" />
            
            <!--Edit position modal-->
            <div tabindex="-1" class="modal fade" id="complete-dialog" style="display: none;" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Delete profile</h4>
                        </div>
                        <div class="pmd-modal-action pmd-modal-bordered text-right">
                            <button data-dismiss="modal" class="btn pmd-btn-flat pmd-ripple-effect btn-primary" type="button">Cancel</button>
                            <button data-dismiss="modal" type="button" onclick="@("window.location.href='" + @Url.Action("Delete", "Positions", new { id = Model.Item2.Id }) + "'");" class="btn pmd-btn-flat pmd-ripple-effect btn-default">Delete</button>
                        </div>
                    </div>
                </div>
            </div>
            <!--Edit position modal-->
        </div>
    </div>
    <div class="col-sm-4">
        @Html.Action("List", "PositionLogs", new { id = Model.Item2.Id })
    </div>
</div>
<div class="row">
    <div class="col-md-12" style="background-color: aqua">

        @*(Email, CreatedOn, CreatedBy, Status (New, Technical Interview, Conditional Offer, Customer Interview, Accepted, Rejected, Canceled))*@
                
        <table>
            <thead>
                <tr>
                    <td>Email</td>
                    <td>Created On</td>
                    <td>Created By</td>
                    <td>Status</td>
                </tr>
            </thead>
            @foreach (var p in Model.Item1)
            {
                <tr>
                    <td>
                        @p.Candidate.Email
                    </td>
                    <td>
                        @p.Candidate.CratedOn
                    </td>
                    <td>
                        @p.Candidate.CreatedBy.Email
                    </td>
                    <td>
                        @p.Candidate.Status
                    </td>
                    <td>
                        @*@Html.ActionLink("Edit", null, null, new { id = p.Candidate_Id }, null)*@
                        <a data-toggle="modal" data-target="#edit-position-dialog" class="btn btn-danger pmd-ripple-effect btn-primary pmd-z-depth">Edit</a>
                    </td>
                    <td>
                        @*@Html.ActionLink("Delete", null, null, new { id = p.Candidate_Id }, new { id = "delete-position-dialog" })*@
                        <a data-toggle="modal" data-target="#delete-position-dialog" class="btn btn-danger pmd-ripple-effect btn-primary pmd-z-depth">Delete</a>
                    </td>
                </tr>
            }
        </table>

        <!--Delete profile modal-->
        <div tabindex="-1" class="modal fade" id="delete-position-dialog" style="display: none;" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-body">
                        <p>Do you want to delete this profile?</p>
                    </div>
                    <div class="pmd-modal-action pmd-modal-bordered text-right">
                        <button data-dismiss="modal" class="btn pmd-btn-flat pmd-ripple-effect btn-primary" type="button">Cancel</button>
                        <button data-dismiss="modal" type="button" onclick="@("window.location.href='" + @Url.Action(null, null, new { id = Model.Item2.Id }) + "'");" class="btn pmd-btn-flat pmd-ripple-effect btn-default">Delete</button>
                    </div>
                </div>
            </div>
        </div>
        <!--Delete profile modal-->

        <!--Edit profile modal-->
        <div tabindex="-1" class="modal fade" id="edit-position-dialog" style="display: none;" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-body">
                        <p>Edit profile</p>
                    </div>
                    <div class="pmd-modal-action pmd-modal-bordered text-right">
                        <button data-dismiss="modal" class="btn pmd-btn-flat pmd-ripple-effect btn-primary" type="button">Cancel</button>
                        <button data-dismiss="modal" type="button" onclick="@("window.location.href='" + @Url.Action(null, null, new { id = Model.Item2.Id }) + "'");" class="btn pmd-btn-flat pmd-ripple-effect btn-default">Delete</button>
                    </div>
                </div>
            </div>
        </div>
        <!--Edit profile modal-->

        <input data-toggle="modal" class="btn btn-info pmd-ripple-effect btn-primary pmd-z-depth" value="Add profile" />
    </div>
</div>